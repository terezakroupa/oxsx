#!python
import os
Import('env')
if not env.GetOption('clean'):
        env.Append(LIBS = "oxsx")
        env.Append(LIBPATH = "../build")

        includes  = " ".join(["-I" + Dir(x).srcnode().abspath for x in env["CPPPATH"]])
        lib_paths = " ".join(["-L" + Dir(x).srcnode().abspath for x in env["LIBPATH"]])
        libs      = " ".join(["-l" + Dir(x).srcnode().abspath for x in env["LIBS"]])

        with open(os.path.join("compile.sh"), "w") as f:
                f.write(
                        ''' # This file is auto generated by scons
g++ $1 -o $(basename "$1" .cpp) -O2 {0} {1} {2}
'''.format(includes, lib_paths, libs)
                        )
